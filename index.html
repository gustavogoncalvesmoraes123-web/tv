<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Streaming Leve</title>

<style>
body {
    background:#000;
    color:#fff;
    font-family:Arial;
    margin:0;
}

#player {
    position:fixed;
    top:0;
    width:100%;
    background:#000;
    z-index:10;
}

video {
    width:100%;
    height:220px;
    background:#111;
}

#info {
    padding:5px;
    font-size:12px;
    color:red;
}

.lista {
    margin-top:270px;
    padding:10px;
}

.canal {
    display:block;
    width:100%;
    padding:15px;
    margin-bottom:8px;
    background:#1a1a1a;
    color:#fff;
    border:1px solid #333;
    font-size:16px;
}
</style>

</head>
<body>

<div id="player">
    <video id="video" controls></video>
    <div id="info">Carregando...</div>
</div>

<div class="lista" id="listaCanais">
Carregando lista...
</div>

<script>

var video = document.getElementById("video");
var info = document.getElementById("info");
var listaDiv = document.getElementById("listaCanais");

/* ðŸ”´ COLOCA SUA URL AQUI */
var urlM3U = "https://github.com/Ramys/Iptv-Brasil-2026/blob/master/CanaisBR02.m3u8";

var canais = [];
var indiceAtual = 0;
var quantidadePorVez = 15;

function darPlay(url, nome){
    info.innerHTML = "Reproduzindo: " + nome;
    video.src = url;
    video.play();
}

function mostrarMais(){

    var contador = 0;

    while(contador < quantidadePorVez && indiceAtual < canais.length){

        var canal = canais[indiceAtual];

        var btn = document.createElement("button");
        btn.className = "canal";
        btn.innerHTML = canal.nome;

        btn.onclick = (function(link, nome){
            return function(){
                darPlay(link, nome);
            };
        })(canal.link, canal.nome);

        listaDiv.appendChild(btn);

        indiceAtual++;
        contador++;
    }

    if(indiceAtual < canais.length){
        setTimeout(mostrarMais, 100);
    }
}

var xhr = new XMLHttpRequest();
xhr.open("GET", urlM3U, true);

xhr.onreadystatechange = function(){

    if(xhr.readyState == 4){

        if(xhr.status == 200){

            var linhas = xhr.responseText.split("\n");
            var i;

            for(i = 0; i < linhas.length; i++){

                if(linhas[i].indexOf("#EXTINF:") != -1){

                    var nome = "Canal";
                    var partes = linhas[i].split(",");

                    if(partes.length > 1){
                        nome = partes[1];
                    }

                    if(linhas[i+1]){
                        var link = linhas[i+1].replace(/\r/g,"").trim();
                        canais.push({nome:nome, link:link});
                    }
                }
            }

            listaDiv.innerHTML = "";
            info.innerHTML = "Escolha um canal";
            mostrarMais();

        } else {
            listaDiv.innerHTML = "Erro ao carregar lista. Status: " + xhr.status;
        }
    }
};

xhr.send();

</script>

</body>
</html>
